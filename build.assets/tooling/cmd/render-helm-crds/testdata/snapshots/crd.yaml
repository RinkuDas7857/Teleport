{{/*
  Deploy the CRD if 'installCRDs' is set to "always", or if 'installCRD' is set
  to "dynamic" and either 'enabled' is true or the CRD is already present.
*/}}
{{- if or
  (eq .Values.installCRDs "always")
  (and
    (eq .Values.installCRDs "dynamic")
    (or
      .Values.enabled
      (lookup "apiextensions.k8s.io/v1" "CustomResourceDefinition" "" "teleportgithubconnectors.resources.teleport.dev")
    )
  )
}}
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  creationTimestamp: null
  name: teleportrolesv7.resources.teleport.dev
spec:
  group: resources.teleport.dev
  names:
    kind: TeleportRoleV7
    listKind: TeleportRoleV7List
    plural: teleportrolesv7
    shortNames:
      - rolev7
      - rolesv7
    singular: teleportrolev7
  scope: Namespaced
  versions:
    - name: v1
      schema:
        openAPIV3Schema:
          description: RoleV7 is the Schema for the rolesv7 API
          properties:
            awesomeField:
              description: 'Awesome field'
              type: string
{{- end }}
